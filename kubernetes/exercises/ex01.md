# ğŸ§ª Kubernetes : Namespaces & Pods

## ğŸ¯ Objectifs pÃ©dagogiques

- CrÃ©er un namespace personnalisÃ©
- CrÃ©er un Pod avec labels et annotations (via YAML et en ligne de commande)
- Comprendre les limites dâ€™un Pod seul (non-scalable, non-rÃ©silient)
- Observer le comportement aprÃ¨s suppression
- Supprimer un namespace et tous les objets quâ€™il contient

---

## ğŸŸ¦ Ã‰tape 1 â€“ CrÃ©er un namespace

### âœ… MÃ©thode impÃ©rative
```bash
kubectl create namespace tp-kube --save-config
```

### ğŸ” VÃ©rification du namespace
```bash
kubectl get ns tp-kube -o yaml
```



### âœ… MÃ©thode dÃ©clarative (YAML)

CrÃ©er un fichier namespace.yaml

```yaml
apiVersion: v1
kind: Namespace
metadata:
  name: tp-kube
  labels:
    environnement: formation
  annotations:
    contact: "admin@formation.local"
```

```bash
kubectl apply -f namespace.yaml
```

### ğŸ” VÃ©rification du namespace modifiÃ©

```bash
kubectl get ns tp-kube -o yaml
```

---

## ğŸŸ¦ Ã‰tape 2 â€“ CrÃ©er un Pod avec labels et annotations

### âœ… MÃ©thode impÃ©rative
```bash
kubectl run mon-pod-imperatif \
  --image=nginx \
  --namespace=tp-kube \
  --labels="app=web,env=dev" \
  --annotations="mainteneur=formation,version=v2" 
```

> âš ï¸ Attention : cette commande crÃ©e un Deployment par dÃ©faut. Pour un Pod "pur", privilÃ©gier la mÃ©thode YAML ci-dessous.

---

### âœ… MÃ©thode dÃ©clarative (YAML)
```yaml
apiVersion: v1
kind: Pod
metadata:
  name: mon-pod
  namespace: tp-kube
  labels:
    app: web
    env: dev
  annotations:
    mainteneur: "formation"
    version: "v2"
spec:
  containers:
  - name: nginx
    image: nginx
```

```bash
kubectl apply -f pod.yaml
```

---

## ğŸŸ¦ Ã‰tape 3 â€“ VÃ©rification et exploration

```bash
kubectl get pods -n tp-kube
kubectl get pod mon-pod -n tp-kube -o yaml
kubectl describe pod mon-pod -n tp-kube
```

### ğŸ” Filtrer par label
```bash
kubectl get pods -n tp-kube -l app=web
```

---

## ğŸŸ¦ Ã‰tape 4 â€“ CrÃ©er plusieurs Pods manuellement

â¡ï¸ On simule un "scaling" manuel (car un Pod seul **nâ€™est pas scalable automatiquement**).

```bash
kubectl apply -f pod.yaml  --dry-run=client -o yaml | sed 's/mon-pod/mon-pod-2/' | kubectl apply -f -
kubectl apply -f pod.yaml  --dry-run=client -o yaml | sed 's/mon-pod/mon-pod-3/' | kubectl apply -f -
kubectl get pods -n tp-kube
```

---

## ğŸŸ¦ Ã‰tape 5 â€“ Supprimer le namespace

```bash
kubectl delete namespace tp-kube
```

ğŸ“Œ Tous les objets (Pods, Services, ConfigMaps, etc.) dans le namespace seront supprimÃ©s.

---

## âœ… RÃ©capitulatif

| Action                          | RÃ©sultat attendu                                    |
|---------------------------------|-----------------------------------------------------|
| CrÃ©ation manuelle de Pods       | Fonctionne, mais pas scalable automatiquement       |
| CrÃ©ation de plusieurs Pods      | Possible mais fastidieuse                           |
| Pas de recrÃ©ation automatique   | Pods sont Ã©phÃ©mÃ¨res sans ReplicaSet/Deployment      |
| Suppression du namespace        | Supprime **tous les objets associÃ©s**               |
| Labels et annotations           | Organisation, filtrage, mÃ©tadonnÃ©es utiles          |

